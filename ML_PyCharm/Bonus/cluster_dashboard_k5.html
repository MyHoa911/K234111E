
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Segmentation Dashboard - K=5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        .cluster-card {
            transition: all 0.3s ease;
        }
        .cluster-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .cluster-card.selected {
            ring-width: 4px;
            ring-color: rgb(59, 130, 246);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen">
    <div class="container mx-auto p-6 max-w-7xl">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-6 fade-in">
            <h1 class="text-4xl font-bold text-slate-800 mb-2">
                Customer Segmentation Analysis
            </h1>
            <p class="text-slate-600">K-Means Clustering Visualization (K = 5)</p>
            <div class="mt-4 text-sm text-slate-500">
                ðŸ“Š Tá»•ng sá»‘ khÃ¡ch hÃ ng: <span class="font-bold text-slate-700">200</span> |
                ðŸŽ¯ Sá»‘ cá»¥m: <span class="font-bold text-slate-700">5</span>
            </div>
        </div>

        <!-- Cluster Cards -->
        <div id="cluster-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6">
            <!-- Cards will be generated by JavaScript -->
        </div>

        <!-- Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Bar Chart -->
            <div class="bg-white rounded-2xl shadow-lg p-6 fade-in">
                <h2 class="text-xl font-bold text-slate-800 mb-4">ðŸ“Š PhÃ¢n bá»‘ khÃ¡ch hÃ ng theo cá»¥m</h2>
                <canvas id="barChart"></canvas>
            </div>

            <!-- Scatter Chart -->
            <div class="bg-white rounded-2xl shadow-lg p-6 fade-in">
                <h2 class="text-xl font-bold text-slate-800 mb-4">ðŸ’° Thu nháº­p vs Chi tiÃªu</h2>
                <canvas id="scatterChart"></canvas>
            </div>
        </div>

        <!-- Customer Table -->
        <div class="bg-white rounded-2xl shadow-lg p-6 fade-in">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold text-slate-800" id="table-title">
                    Táº¥t cáº£ khÃ¡ch hÃ ng
                </h2>
                <button id="reset-filter" class="px-4 py-2 bg-slate-200 hover:bg-slate-300 rounded-lg text-sm font-semibold transition-all hidden">
                    Xem táº¥t cáº£
                </button>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="border-b-2 border-slate-200">
                            <th class="text-left py-3 px-4 text-slate-600 font-semibold">Customer ID</th>
                            <th class="text-left py-3 px-4 text-slate-600 font-semibold">Cluster</th>
                            <th class="text-left py-3 px-4 text-slate-600 font-semibold">Age</th>
                            <th class="text-left py-3 px-4 text-slate-600 font-semibold">Gender</th>
                            <th class="text-left py-3 px-4 text-slate-600 font-semibold">Annual Income</th>
                            <th class="text-left py-3 px-4 text-slate-600 font-semibold">Spending Score</th>
                        </tr>
                    </thead>
                    <tbody id="customer-table-body">
                        <!-- Rows will be generated by JavaScript -->
                    </tbody>
                </table>
                <div id="table-footer" class="text-center py-4 text-slate-500"></div>
            </div>
        </div>
    </div>

    <script>
        // Data
        const clusterStats = [{"id": 0, "name": "Cluster 0", "color": "#3b82f6", "customerCount": 89, "avgAge": 46.2, "avgIncome": 0, "avgSpending": 0}, {"id": 1, "name": "Cluster 1", "color": "#ef4444", "customerCount": 11, "avgAge": 32.5, "avgIncome": 0, "avgSpending": 0}, {"id": 2, "name": "Cluster 2", "color": "#10b981", "customerCount": 29, "avgAge": 24.7, "avgIncome": 0, "avgSpending": 0}, {"id": 3, "name": "Cluster 3", "color": "#f59e0b", "customerCount": 38, "avgAge": 40.4, "avgIncome": 0, "avgSpending": 0}, {"id": 4, "name": "Cluster 4", "color": "#8b5cf6", "customerCount": 33, "avgAge": 31.8, "avgIncome": 0, "avgSpending": 0}];
        const customersData = [{"CustomerID": "3", "cluster": 0, "Age": 20, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "5", "cluster": 0, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "7", "cluster": 0, "Age": 35, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "9", "cluster": 0, "Age": 64, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "11", "cluster": 0, "Age": 67, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "13", "cluster": 0, "Age": 58, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "15", "cluster": 0, "Age": 37, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "17", "cluster": 0, "Age": 35, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "19", "cluster": 0, "Age": 52, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "21", "cluster": 0, "Age": 35, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "23", "cluster": 0, "Age": 46, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "25", "cluster": 0, "Age": 54, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "27", "cluster": 0, "Age": 45, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "29", "cluster": 0, "Age": 40, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "31", "cluster": 0, "Age": 60, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "33", "cluster": 0, "Age": 53, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "35", "cluster": 0, "Age": 49, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "37", "cluster": 0, "Age": 42, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "39", "cluster": 0, "Age": 36, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "41", "cluster": 0, "Age": 65, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "43", "cluster": 0, "Age": 48, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "45", "cluster": 0, "Age": 49, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "47", "cluster": 0, "Age": 50, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "48", "cluster": 0, "Age": 27, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "49", "cluster": 0, "Age": 29, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "50", "cluster": 0, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "51", "cluster": 0, "Age": 49, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "53", "cluster": 0, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "54", "cluster": 0, "Age": 59, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "55", "cluster": 0, "Age": 50, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "56", "cluster": 0, "Age": 47, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "57", "cluster": 0, "Age": 51, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "58", "cluster": 0, "Age": 69, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "59", "cluster": 0, "Age": 27, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "60", "cluster": 0, "Age": 53, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "61", "cluster": 0, "Age": 70, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "63", "cluster": 0, "Age": 67, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "64", "cluster": 0, "Age": 54, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "65", "cluster": 0, "Age": 63, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "67", "cluster": 0, "Age": 43, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "68", "cluster": 0, "Age": 68, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "70", "cluster": 0, "Age": 32, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "71", "cluster": 0, "Age": 70, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "72", "cluster": 0, "Age": 47, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "73", "cluster": 0, "Age": 60, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "74", "cluster": 0, "Age": 60, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "75", "cluster": 0, "Age": 59, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "76", "cluster": 0, "Age": 26, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "77", "cluster": 0, "Age": 45, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "78", "cluster": 0, "Age": 40, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "79", "cluster": 0, "Age": 23, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "80", "cluster": 0, "Age": 49, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "81", "cluster": 0, "Age": 57, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "82", "cluster": 0, "Age": 38, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "83", "cluster": 0, "Age": 67, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "84", "cluster": 0, "Age": 46, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "86", "cluster": 0, "Age": 48, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "87", "cluster": 0, "Age": 55, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "88", "cluster": 0, "Age": 22, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "89", "cluster": 0, "Age": 34, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "90", "cluster": 0, "Age": 50, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "91", "cluster": 0, "Age": 68, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "92", "cluster": 0, "Age": 18, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "93", "cluster": 0, "Age": 48, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "94", "cluster": 0, "Age": 40, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "95", "cluster": 0, "Age": 32, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "96", "cluster": 0, "Age": 24, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "97", "cluster": 0, "Age": 47, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "98", "cluster": 0, "Age": 27, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "99", "cluster": 0, "Age": 48, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "100", "cluster": 0, "Age": 20, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "101", "cluster": 0, "Age": 23, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "102", "cluster": 0, "Age": 49, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "103", "cluster": 0, "Age": 67, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "105", "cluster": 0, "Age": 49, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "106", "cluster": 0, "Age": 21, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "107", "cluster": 0, "Age": 66, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "108", "cluster": 0, "Age": 54, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "109", "cluster": 0, "Age": 68, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "110", "cluster": 0, "Age": 66, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "111", "cluster": 0, "Age": 65, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "113", "cluster": 0, "Age": 38, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "114", "cluster": 0, "Age": 19, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "115", "cluster": 0, "Age": 18, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "117", "cluster": 0, "Age": 63, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "118", "cluster": 0, "Age": 49, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "119", "cluster": 0, "Age": 51, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "120", "cluster": 0, "Age": 50, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "122", "cluster": 0, "Age": 38, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "180", "cluster": 1, "Age": 35, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "182", "cluster": 1, "Age": 32, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "184", "cluster": 1, "Age": 29, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "186", "cluster": 1, "Age": 30, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "188", "cluster": 1, "Age": 28, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "190", "cluster": 1, "Age": 36, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "192", "cluster": 1, "Age": 32, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "194", "cluster": 1, "Age": 38, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "196", "cluster": 1, "Age": 35, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "198", "cluster": 1, "Age": 32, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "200", "cluster": 1, "Age": 30, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "1", "cluster": 2, "Age": 19, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "2", "cluster": 2, "Age": 21, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "4", "cluster": 2, "Age": 23, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "6", "cluster": 2, "Age": 22, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "8", "cluster": 2, "Age": 23, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "10", "cluster": 2, "Age": 30, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "12", "cluster": 2, "Age": 35, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "14", "cluster": 2, "Age": 24, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "16", "cluster": 2, "Age": 22, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "18", "cluster": 2, "Age": 20, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "20", "cluster": 2, "Age": 35, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "22", "cluster": 2, "Age": 25, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "24", "cluster": 2, "Age": 31, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "26", "cluster": 2, "Age": 29, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "28", "cluster": 2, "Age": 35, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "30", "cluster": 2, "Age": 23, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "32", "cluster": 2, "Age": 21, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "34", "cluster": 2, "Age": 18, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "36", "cluster": 2, "Age": 21, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "38", "cluster": 2, "Age": 30, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "40", "cluster": 2, "Age": 20, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "42", "cluster": 2, "Age": 24, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "44", "cluster": 2, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "46", "cluster": 2, "Age": 24, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "52", "cluster": 2, "Age": 33, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "62", "cluster": 2, "Age": 19, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "66", "cluster": 2, "Age": 18, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "69", "cluster": 2, "Age": 19, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "85", "cluster": 2, "Age": 21, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "125", "cluster": 3, "Age": 23, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "127", "cluster": 3, "Age": 43, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "129", "cluster": 3, "Age": 59, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "131", "cluster": 3, "Age": 47, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "133", "cluster": 3, "Age": 25, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "135", "cluster": 3, "Age": 20, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "137", "cluster": 3, "Age": 44, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "139", "cluster": 3, "Age": 19, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "141", "cluster": 3, "Age": 57, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "143", "cluster": 3, "Age": 28, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "145", "cluster": 3, "Age": 25, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "147", "cluster": 3, "Age": 48, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "149", "cluster": 3, "Age": 34, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "151", "cluster": 3, "Age": 43, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "153", "cluster": 3, "Age": 44, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "155", "cluster": 3, "Age": 47, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "157", "cluster": 3, "Age": 37, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "159", "cluster": 3, "Age": 34, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "161", "cluster": 3, "Age": 56, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "163", "cluster": 3, "Age": 19, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "165", "cluster": 3, "Age": 50, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "167", "cluster": 3, "Age": 42, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "169", "cluster": 3, "Age": 36, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "171", "cluster": 3, "Age": 40, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "173", "cluster": 3, "Age": 36, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "175", "cluster": 3, "Age": 52, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "177", "cluster": 3, "Age": 58, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "179", "cluster": 3, "Age": 59, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "181", "cluster": 3, "Age": 37, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "183", "cluster": 3, "Age": 46, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "185", "cluster": 3, "Age": 41, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "187", "cluster": 3, "Age": 54, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "189", "cluster": 3, "Age": 41, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "191", "cluster": 3, "Age": 34, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "193", "cluster": 3, "Age": 33, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "195", "cluster": 3, "Age": 47, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "197", "cluster": 3, "Age": 45, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "199", "cluster": 3, "Age": 32, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "104", "cluster": 4, "Age": 26, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "112", "cluster": 4, "Age": 19, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "116", "cluster": 4, "Age": 19, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "121", "cluster": 4, "Age": 27, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "123", "cluster": 4, "Age": 40, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "124", "cluster": 4, "Age": 39, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "126", "cluster": 4, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "128", "cluster": 4, "Age": 40, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "130", "cluster": 4, "Age": 38, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "132", "cluster": 4, "Age": 39, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "134", "cluster": 4, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "136", "cluster": 4, "Age": 29, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "138", "cluster": 4, "Age": 32, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "140", "cluster": 4, "Age": 35, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "142", "cluster": 4, "Age": 32, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "144", "cluster": 4, "Age": 32, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "146", "cluster": 4, "Age": 28, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "148", "cluster": 4, "Age": 32, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "150", "cluster": 4, "Age": 34, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "152", "cluster": 4, "Age": 39, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "154", "cluster": 4, "Age": 38, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "156", "cluster": 4, "Age": 27, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "158", "cluster": 4, "Age": 30, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "160", "cluster": 4, "Age": 30, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "162", "cluster": 4, "Age": 29, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "164", "cluster": 4, "Age": 31, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "166", "cluster": 4, "Age": 36, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "168", "cluster": 4, "Age": 33, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "170", "cluster": 4, "Age": 32, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "172", "cluster": 4, "Age": 28, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "174", "cluster": 4, "Age": 36, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "176", "cluster": 4, "Age": 30, "Gender": "Female", "AnnualIncome": 0, "SpendingScore": 0}, {"CustomerID": "178", "cluster": 4, "Age": 27, "Gender": "Male", "AnnualIncome": 0, "SpendingScore": 0}];

        let selectedCluster = null;
        let barChart, scatterChart;

        // Generate Cluster Cards
        function generateClusterCards() {
            const container = document.getElementById('cluster-cards');
            container.innerHTML = '';

            clusterStats.forEach(cluster => {
                const card = document.createElement('div');
                card.className = 'cluster-card bg-white rounded-xl shadow-lg p-6 cursor-pointer';
                card.style.borderTop = `4px solid ${cluster.color}`;
                card.onclick = () => toggleCluster(cluster.id);

                card.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-bold text-slate-800">${cluster.name}</h3>
                        <div class="w-10 h-10 rounded-full flex items-center justify-center" 
                             style="background-color: ${cluster.color}20;">
                            <svg class="w-5 h-5" style="color: ${cluster.color}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                    </div>

                    <div class="space-y-3">
                        <div class="flex items-center gap-2">
                            <span class="text-2xl font-bold" style="color: ${cluster.color}">
                                ${cluster.customerCount}
                            </span>
                            <span class="text-slate-600 text-sm">khÃ¡ch hÃ ng</span>
                        </div>

                        <div class="border-t pt-3 space-y-2">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-slate-600">Tuá»•i TB:</span>
                                <span class="font-semibold text-slate-800">${cluster.avgAge}</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-slate-600">Thu nháº­p TB:</span>
                                <span class="font-semibold text-slate-800">$${cluster.avgIncome.toLocaleString()}</span>
                            </div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-slate-600">Chi tiÃªu TB:</span>
                                <span class="font-semibold text-slate-800">${cluster.avgSpending}</span>
                            </div>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // Toggle Cluster Selection
        function toggleCluster(clusterId) {
            selectedCluster = selectedCluster === clusterId ? null : clusterId;
            updateUI();
        }

        // Update UI based on selection
        function updateUI() {
            // Update cards selection
            const cards = document.querySelectorAll('.cluster-card');
            cards.forEach((card, index) => {
                if (selectedCluster === index) {
                    card.classList.add('selected', 'ring-4', 'ring-blue-500');
                } else {
                    card.classList.remove('selected', 'ring-4', 'ring-blue-500');
                }
            });

            // Update table
            updateTable();

            // Update charts
            updateCharts();

            // Update reset button
            const resetBtn = document.getElementById('reset-filter');
            const tableTitle = document.getElementById('table-title');
            if (selectedCluster !== null) {
                resetBtn.classList.remove('hidden');
                tableTitle.textContent = `Chi tiáº¿t Cluster ${selectedCluster}`;
            } else {
                resetBtn.classList.add('hidden');
                tableTitle.textContent = 'Táº¥t cáº£ khÃ¡ch hÃ ng';
            }
        }

        // Update Table
        function updateTable() {
            const tbody = document.getElementById('customer-table-body');
            const footer = document.getElementById('table-footer');

            let displayData = selectedCluster !== null 
                ? customersData.filter(c => c.cluster === selectedCluster)
                : customersData;

            const displayLimit = 50;
            const displayCustomers = displayData.slice(0, displayLimit);

            tbody.innerHTML = '';
            displayCustomers.forEach(customer => {
                const row = document.createElement('tr');
                row.className = 'border-b border-slate-100 hover:bg-slate-50 transition-colors';

                const clusterColor = clusterStats[customer.cluster].color;

                row.innerHTML = `
                    <td class="py-3 px-4 font-medium text-slate-700">${customer.CustomerID}</td>
                    <td class="py-3 px-4">
                        <span class="px-3 py-1 rounded-full text-white text-sm font-semibold"
                              style="background-color: ${clusterColor}">
                            ${customer.cluster}
                        </span>
                    </td>
                    <td class="py-3 px-4 text-slate-700">${customer.Age}</td>
                    <td class="py-3 px-4 text-slate-700">${customer.Gender}</td>
                    <td class="py-3 px-4 text-slate-700">$${customer.AnnualIncome.toLocaleString()}</td>
                    <td class="py-3 px-4 text-slate-700">${customer.SpendingScore}</td>
                `;

                tbody.appendChild(row);
            });

            if (displayData.length > displayLimit) {
                footer.textContent = `Hiá»ƒn thá»‹ ${displayLimit}/${displayData.length} khÃ¡ch hÃ ng`;
            } else {
                footer.textContent = '';
            }
        }

        // Create Bar Chart
        function createBarChart() {
            const ctx = document.getElementById('barChart').getContext('2d');
            barChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: clusterStats.map(c => c.name),
                    datasets: [{
                        label: 'Sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng',
                        data: clusterStats.map(c => c.customerCount),
                        backgroundColor: clusterStats.map(c => c.color),
                        borderRadius: 8,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        // Create Scatter Chart
        function createScatterChart() {
            const ctx = document.getElementById('scatterChart').getContext('2d');

            const datasets = clusterStats.map(cluster => ({
                label: cluster.name,
                data: customersData
                    .filter(c => c.cluster === cluster.id)
                    .map(c => ({ x: c.AnnualIncome, y: c.SpendingScore })),
                backgroundColor: cluster.color,
                borderColor: cluster.color,
            }));

            scatterChart = new Chart(ctx, {
                type: 'scatter',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        x: { 
                            title: { display: true, text: 'Annual Income ($)' }
                        },
                        y: { 
                            title: { display: true, text: 'Spending Score' }
                        }
                    }
                }
            });
        }

        // Update Charts
        function updateCharts() {
            if (selectedCluster !== null) {
                const filteredData = customersData.filter(c => c.cluster === selectedCluster);
                scatterChart.data.datasets = [{
                    label: `Cluster ${selectedCluster}`,
                    data: filteredData.map(c => ({ x: c.AnnualIncome, y: c.SpendingScore })),
                    backgroundColor: clusterStats[selectedCluster].color,
                    borderColor: clusterStats[selectedCluster].color,
                }];
            } else {
                scatterChart.data.datasets = clusterStats.map(cluster => ({
                    label: cluster.name,
                    data: customersData
                        .filter(c => c.cluster === cluster.id)
                        .map(c => ({ x: c.AnnualIncome, y: c.SpendingScore })),
                    backgroundColor: cluster.color,
                    borderColor: cluster.color,
                }));
            }
            scatterChart.update();
        }

        // Reset Filter
        document.getElementById('reset-filter').onclick = () => {
            selectedCluster = null;
            updateUI();
        };

        // Initialize
        generateClusterCards();
        updateTable();
        createBarChart();
        createScatterChart();
    </script>
</body>
</html>
    